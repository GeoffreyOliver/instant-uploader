(function(l){var m,c,k,n,t,p,f;l.fn.fileuploader=function(y){function q(a){a.stopPropagation();a.preventDefault();f.className="dragover"==a.type?"jquery-fileuploader-draganddroparea draganddroparea-hover":"jquery-fileuploader-draganddroparea"}function z(a){a.preventDefault();k=a.target.form?a.target.form:null;p=a.target.parentNode.parentNode.querySelector("div.jquery-fileuploader-filepreviewarea");0<p.childNodes.length&&(t=p.childNodes.length,n=0,u())}function A(a){c=a.target.parentNode;q(a);(a=a.target.files||
a.dataTransfer.files)&&[].forEach.call(a,v)}function B(a){c=a.target.parentNode.parentNode;(a=a.target.files||a.dataTransfer.files)&&[].forEach.call(a,v)}function v(a){var b;if(!1!==/^image\//.test(a.type)){var g=new FileReader;b=document.createElement("div");b.className="jquery-uploader-img-container";var d=document.createElement("a");d.innerHTML="Remove";d.className="jquery-uploader-img-delete";d.href="#";d.onclick=w;var e=document.createElement("span");e.appendChild(d);b.appendChild(e);var f=document.createElement("img");
f.file=a;f.id="element-to-upload";f.className="jquery-uploader-img-thumbnail";b.appendChild(f);var r=document.createElement("div");r.className="jquery-uploader-progress";d=a.name+" "+x(a.size);d=20<=d.length?"..."+d.substr(d.length-20):d;e=document.createElement("div");e.className="jquery-uploader-progress-bar-placeholder";e.setAttribute("role","progressbar");e.setAttribute("aria-valuenow","0");e.setAttribute("aria-valuemin","0");e.setAttribute("aria-valuemax","100");e.innerHTML=d;e.style.width="100%";
r.appendChild(e);b.appendChild(r);g.onload=function(a){f.src=a.target.result};g.readAsDataURL(a)}else g=document.createElement("div"),g.className="jquery-uploader-item-container",b=document.createElement("div"),b.className="jquery-uploader-item-content jquery-uploader-progress",g.appendChild(b),d=document.createElement("div"),d.className="jquery-uploader-item-close",d.onclick=w,b.appendChild(d),d=a.name+" "+x(a.size),d=20<=d.length?"..."+d.substr(d.length-20):d,e=document.createElement("div"),e.innerHTML=
d,e.className="jquery-uploader-progress-bar-placeholder",e.setAttribute("role","progressbar"),e.setAttribute("aria-valuenow","0"),e.setAttribute("aria-valuemin","0"),e.setAttribute("aria-valuemax","100"),e.style.width="100%",b.appendChild(e),b=document.createElement("p"),b.style.display="none",b.file=a,b.id="element-to-upload",g.appendChild(b),b=g;null!==h.maxsize?a.size>1E3*h.maxsize?c.querySelector(".jquery-fileuploader-error-message").innerHTML="File too large!":(!0===h.multiple?null!==h.filecount?
c.querySelector("div.jquery-fileuploader-filepreviewarea").childNodes.length>=h.filecount?(c.querySelector("div.jquery-fileuploader-filepreviewarea").insertBefore(b,c.querySelector("div.jquery-fileuploader-filepreviewarea").firstChild),c.querySelector("div.jquery-fileuploader-filepreviewarea").removeChild(c.querySelector("div.jquery-fileuploader-filepreviewarea").lastChild)):c.querySelector("div.jquery-fileuploader-filepreviewarea").appendChild(b):c.querySelector("div.jquery-fileuploader-filepreviewarea").appendChild(b):
(a=c.querySelector("div.jquery-fileuploader-filepreviewarea").childNodes,l.each(a,function(a,b){b.parentNode.removeChild(b)}),c.querySelector("div.jquery-fileuploader-filepreviewarea").appendChild(b)),c.querySelector(".jquery-fileuploader-error-message").innerHTML=""):(!0===h.multiple?null!==h.filecount?c.querySelector("div.jquery-fileuploader-filepreviewarea").childNodes.length>=h.filecount?(c.querySelector("div.jquery-fileuploader-filepreviewarea").insertBefore(b,c.querySelector("div.jquery-fileuploader-filepreviewarea").firstChild),
c.querySelector("div.jquery-fileuploader-filepreviewarea").removeChild(c.querySelector("div.jquery-fileuploader-filepreviewarea").lastChild)):c.querySelector("div.jquery-fileuploader-filepreviewarea").appendChild(b):c.querySelector("div.jquery-fileuploader-filepreviewarea").appendChild(b):(a=c.querySelector("div.jquery-fileuploader-filepreviewarea").childNodes,l.each(a,function(a,b){b.parentNode.removeChild(b)}),c.querySelector("div.jquery-fileuploader-filepreviewarea").appendChild(b)),c.querySelector(".jquery-fileuploader-error-message").innerHTML=
"")}function w(a){a.preventDefault();a.target.parentNode.parentNode.parentNode.removeChild(a.target.parentNode.parentNode)}function u(){if(n<t){var a=new FormData;if(null!==k)for(var b=0;b<k.elements.length;b++){var c=k.elements[b];c.name&&a.append(c.name,c.value)}var d=p.childNodes[n],b=d.querySelector("#element-to-upload"),e=d.querySelector(".jquery-uploader-progress-bar-placeholder");e.className+=" jquery-uploader-progress-bar";e.style.width="50%";e.setAttribute("aria-valuenow","50%");d.querySelector(".jquery-uploader-progress").className+=
" active";k.querySelector("input[type=submit]").value="Uploading...";var f=new XMLHttpRequest;f.open("POST","http://localhost:3000/users/ajax",!0);a.append("file",b.file,b.file.name);f.send(a);f.onreadystatechange=function(){if(4==f.readyState)if(200==f.status){n+=1;var a=d.querySelector(".jquery-uploader-img-delete");a&&(a.parentNode.style.opacity="1",a.innerHTML="Uploaded!");e.className="jquery-uploader-progress-bar-complete";e.style.width="100%";e.setAttribute("aria-valuenow","100%");for(var a=
d.querySelector(".jquery-uploader-progress"),b="",c=a.className.split(" "),g=0;g<c.length;g++)"active"!==c[g].trim()&&(b+=c[g].trim()+" ");a.className=b;u()}else a=d.querySelector(".jquery-uploader-img-delete"),a.parentNode.style.opacity="1",a.innerHTML="Failed!",console.log(f.responseText)}}else k.querySelector("input[type=submit]").value="Uploaded!",k.querySelector("input[type=submit]").setAttribute("disabled","disabled")}function x(a,b){var c=(b=void 0===b?!0:b)?1E3:1024;if(Math.abs(a)<c)return a+
" B";var d=b?"kB MB GB TB PB EB ZB YB".split(" "):"KiB MiB GiB TiB PiB EiB ZiB YiB".split(" "),e=-1;do a/=c,++e;while(Math.abs(a)>=c&&e<d.length-1);return a.toFixed(1)+" "+d[e]}var h=l.extend({uploadurl:null,multiple:!1,filetype:null,maxsize:null,filecount:null,instantupload:!1},y);m=l(this)[0];(function(){var a=document.createElement("p");a.style.color="red";a.className="jquery-fileuploader-error-message";m.appendChild(a);f=document.createElement("div");m.appendChild(f);(new XMLHttpRequest).upload&&
(f.addEventListener("dragover",q),f.addEventListener("dragleave",q),f.addEventListener("drop",A),f.style.display="block");f.className="jquery-fileuploader-draganddroparea";f.appendChild(document.createTextNode("Drop files here to upload"));f.appendChild(document.createElement("br"));f.appendChild(document.createTextNode("--or--"));f.appendChild(document.createElement("br"));a=document.createElement("input");a.type="file";!0===h.multiple&&a.setAttribute("multiple","true");a.onchange=B;f.appendChild(a)})();
(function(){var a=document.createElement("div");a.className="jquery-fileuploader-filepreviewarea";m.appendChild(a)})();(function(){var a=document.createElement("div");a.className="jquery-uploader-input-buttons";var b=document.createElement("input");b.type="submit";b.className="jquery-uploader-file-submit-button";b.value="Upload";b.onclick=z;!0===h.instantupload&&b.setAttribute("disabled","disabled");a.appendChild(b);m.appendChild(a)})();(function(){var a=document.head||document.getElementsByTagName("head")[0],
b=document.createElement("style");b.type="text/css";b.styleSheet?b.styleSheet.cssText=css:b.appendChild(document.createTextNode(".jquery-fileuploader-draganddroparea{font-weight: bold;text-align: center;padding: 1em 0;margin: 1em 0;color: #555;border: 2px dashed #555;border-radius: 7px;cursor: default;background-color: rgba(0,0,0,0.1);}.draganddroparea-hover{color: #f00;border-color: #f00;border-style: solid;box-shadow: inset 0 3px 4px #888;}#progress p.success{background: #0c0 none 0 0 no-repeat;}#progress p.failed{background: #c00 none 0 0 no-repeat;}img.jquery-uploader-img-thumbnail{display: inline-block;max-width: 100%;height: auto;background-color: #ffffff;}div.jquery-uploader-img-container {display: inline-block;width: 200px;margin: 4px;position: relative;height: 200px;border: 1px solid rgba(0,0,0,0.2);}}div.jquery-uploader-img-container span {line-height: 200px;background: rgba(0,0,0,0.5);cursor: pointer;display: table;height: 200px;position: absolute;width: 200px;opacity: 0;-webkit-transition: opacity 500ms;-moz-transition: opacity 500ms;-o-transition: opacity 500ms;transition: opacity 500ms;}div.jquery-uploader-item-container span {background: rgba(0,0,0,0.5);cursor: pointer;display: table;position: absolute;width: 200px;opacity: 0;-webkit-transition: opacity 500ms;-moz-transition: opacity 500ms;-o-transition: opacity 500ms;transition: opacity 500ms;}div.jquery-uploader-img-container span:hover {opacity: 1;}div.jquery-uploader-img-container span a {display: table-cell;text-align: center;vertical-align: middle;text-decoration: none;color: white;font-size: 30px;font-family: helvetica;}div.jquery-uploader-img-container:hover {opacity: 0.7;}.jquery-uploader-file-submit-button{display: inline-block;padding: 6px 12px;margin-bottom: 0;font-size: 14px;font-weight: normal;line-height: 1.428571429;text-align: center;white-space: nowrap;vertical-align: middle;cursor: pointer;border: 1px solid transparent;border-radius: 4px;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;-o-user-select: none;user-select: none;color: #ffffff;background-color: #428bca;border-color: #357ebd;}.jquery-uploader-file-submit-button:hover,.jquery-uploader-file-submit-button:focus,.jquery-uploader-file-submit-button.active{color: #ffffff;background-color: #3276b1;border-color: #285e8e;}.jquery-uploader-progress {margin-bottom: 5px;margin-top: 5px;overflow: hidden;background-color: rgba(128,128,128,0.1);}.jquery-uploader-progress.active .jquery-uploader-progress-bar{-webkit-animation: progress-bar-stripes 2s linear infinite;-moz-animation: progress-bar-stripes 2s linear infinite;-ms-animation: progress-bar-stripes 2s linear infinite;-o-animation: progress-bar-stripes 2s linear infinite;animation: progress-bar-stripes 2s linear infinite;}@-webkit-keyframes progress-bar-stripes {from {background-position: 40px 0;}to {background-position: 0 0;}}@-moz-keyframes progress-bar-stripes {from {background-position: 40px 0;}to {background-position: 0 0;}}@-o-keyframes progress-bar-stripes {from {background-position: 0 0;}to {background-position: 40px 0;}}@keyframes progress-bar-stripes {from {background-position: 40px 0;}to {background-position: 0 0;}}.jquery-uploader-progress-bar {float: left;width: 0;height: 100%;font-size: 15px;color: #ffffff;text-align: left;background-color: #d9534f;background-image: -webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.25, rgba(255, 255, 255, 0.15)), color-stop(0.25, transparent), color-stop(0.5, transparent), color-stop(0.5, rgba(255, 255, 255, 0.15)), color-stop(0.75, rgba(255, 255, 255, 0.15)), color-stop(0.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);}.jquery-uploader-progress-bar-complete {float: left;width: 0;height: 100%;font-size: 15px;color: #ffffff;text-align: left;background-color: #5cb85c;}.jquery-uploader-item-close {position:absolute;right:0px;width:20px;height:20px;cursor:pointer;border:1px solid #000;background-color:#efefef;z-index: 5;-webkit-transition: opacity 150ms;background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAiElEQVR42r2RsQrDMAxEBRdl8SDcX8lQPGg1GBI6lvz/h7QyRRXV0qUULwfvwZ1tenw5PxToRPWMC52eA9+WDnlh3HFQ/xBQl86NFYJqeGflkiogrOvVlIFhqURFVho3x1moGAa3deMs+LS30CAhBN5nNxeT5hbJ1zwmji2k+aF6NENIPf/hs54f0sZFUVAMigAAAABJRU5ErkJggg==) no-repeat;text-align:right;border: 0;}.jquery-uploader-item-close:hover, .jquery-uploader-item-close:focus {background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAqklEQVR4XqWRMQ6DMAxF/1Fyilyj2SmIBUG5QcTCyJA5Z8jGhlBPgRi4TmoDraVmKFJlWYrlp/g5QfwRlwEVNWVa4WzfH9jK6kCkEkBjwxOhLghheMWMELUAqqwQ4OCbnE4LJnhr5IYdqQt4DJQjhe9u4vBBmnxHHNzRFkDGjHDo0VuTAqy2vAG4NkvXXDHxbGsIGlj3e835VFNtdugma/Jk0eXq0lP//5svi4PtO01oFfYAAAAASUVORK5CYII=);}.jquery-uploader-item-content {width:200px;position: relative;border:1px solid rgba(128,128,128,0.8);margin: 5px;color: #428bca;background-color: rgba(128,128,128,0.1);}"));
a.appendChild(b)})()}})(jQuery);